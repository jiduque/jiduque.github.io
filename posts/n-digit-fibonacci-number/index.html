<!DOCTYPE html><html lang="en-US" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="N-digit Fibonacci Number" /><meta name="author" content="Jorge Duque" /><meta property="og:locale" content="en_US" /><meta name="description" content="Note: This is problem 25 on Project Euler" /><meta property="og:description" content="Note: This is problem 25 on Project Euler" /><link rel="canonical" href="https://jiduque.github.io/posts/n-digit-fibonacci-number/" /><meta property="og:url" content="https://jiduque.github.io/posts/n-digit-fibonacci-number/" /><meta property="og:site_name" content="Jorge Duque" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-06-12T00:00:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="N-digit Fibonacci Number" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Jorge Duque"},"description":"Note: This is problem 25 on Project Euler","url":"https://jiduque.github.io/posts/n-digit-fibonacci-number/","@type":"BlogPosting","headline":"N-digit Fibonacci Number","dateModified":"2022-02-07T01:21:01-06:00","datePublished":"2021-06-12T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://jiduque.github.io/posts/n-digit-fibonacci-number/"},"@context":"https://schema.org"}</script><title>N-digit Fibonacci Number | Jorge Duque</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Jorge Duque"><meta name="application-name" content="Jorge Duque"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/34616214?v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Jorge Duque</a></div><div class="site-subtitle font-italic">Problems & Ramblings</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT ME</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/jiduque" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://www.linkedin.com/in/jiduque" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['jor.duqu','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>N-digit Fibonacci Number</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>N-digit Fibonacci Number</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Jorge Duque </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, Jun 12, 2021, 12:00 AM -0500" prep="on" > Jun 12, 2021 <i class="unloaded">2021-06-12T00:00:00-05:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Feb 7, 2022, 1:21 AM -0600" prefix="Updated " > Feb 7, 2022 <i class="unloaded">2022-02-07T01:21:01-06:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="513 words">2 min</span></div></div><div class="post-content"><p><strong>Note: This is problem 25 on Project Euler</strong></p><h1 id="problem-statement">Problem Statement</h1><p>The Fibonacci sequence is defined by the recurrence relation:</p>\[F_n = F_{n−1} + F_{n−2}\]<p>where $F_1 = 1$ and $F_2 = 1$. If you continue to generate thes numbers, you will find that $F_{12} = 144$. The 12th term is the first to contain three digits. Can you find the index of the first term in the Fibonacci sequence that contains 1000 digits?</p><h1 id="solutions">Solution(s)</h1><p>This problem is somewhat similar to Problem 2 on Project Euler, but I actually think it is easier. Below, I present two solutions to the problem. One is what I think is the most straight-forward way of doing it, and the other involves reframing the problem and using generating functions (used in Problem 2). My Python implementation of the second solution can be found <a href="https://github.com/jiduque/project-euler/blob/main/Problem25.py"> here </a>.</p><h2 id="simple-solution">Simple Solution</h2><p>The simple way to solve this problem is to just keep generating Fibonacci numbers until you find the one that is of the desired length. A solution to that would look like the code below.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">n_digit_fibonacci</span><span class="p">(</span><span class="n">desired_length</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">desired_length</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="n">n</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">fn_1</span><span class="p">,</span> <span class="n">fn_2</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">fn_1</span> <span class="o">+</span> <span class="n">fn_2</span>

    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">fn</span><span class="p">))</span> <span class="o">&lt;</span> <span class="n">desired_length</span><span class="p">:</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">fn_2</span> <span class="o">=</span> <span class="n">fn_1</span>
        <span class="n">fn_1</span> <span class="o">=</span> <span class="n">fn</span>
        <span class="n">fn</span> <span class="o">=</span> <span class="n">fn_1</span> <span class="o">+</span> <span class="n">fn_2</span>
    
    <span class="k">return</span> <span class="n">n</span>
</pre></table></code></div></div><p>This simple implementation runs in linear time, but we can do better… kinda. First let’s think about an $n$-digit number means.</p><h2 id="n-digit-numbers">N-digit Numbers</h2><p>The smallest $n$-digit number is $10^{n-1}$. This then means that for a number, $x$, to be $n$ digits long, it has to satisfy the following condition:</p>\[10^{n-1} \leq x &lt; 10^n\]<p>Please note that assumes that we are working in base 10. This insight allows us to modify the code above in such a way where we no longer have to convert our number into a string. But more importantly, it reframes our problem to solving an inequality.</p><h2 id="solving-the-inequality">Solving the Inequality</h2><p>Plugging in the generating function of the Fibonacci numbers, we get the following inequality.</p>\[10^{n-1} \leq \frac{1}{\sqrt{5}} \left( \phi^k - \psi^k \right) &lt; 10^n\]<p>This is trancendental so we can’t really solve for $k$ exactly, but we can approximate. Notice that $\psi^k \to 0$ as $k$ gets large. This means we can approximate $k$ with the value shown below.</p>\[k \approx \left\lfloor \frac{\log{\sqrt{5}} + (n-1) \log{10}}{ \log{\phi}} \right\rfloor\]<h2 id="the-issue">The Issue</h2><p>This shows we can solve the problem essentially in constant time (for large values)… at least in theory. For our particular problem, we have to find a value that has 1000 digits or more, which leads to issues. The issue lies in the fact that $k$ is an approximation, so we still have to check if value satisfies the conditions and check if its neighbors satistfy the condition. Although we can generate Fibonacci numbers in constant time using generating functions, it requires raising a floating point numbers to 1000, at which point we will overflow/underflow. So we still have to generate Fibonacci numbers the usual way.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/math/'>Math</a>, <a href='/categories/project-euler/'>Project Euler</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=N-digit Fibonacci Number - Jorge Duque&url=https://jiduque.github.io/posts/n-digit-fibonacci-number/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=N-digit Fibonacci Number - Jorge Duque&u=https://jiduque.github.io/posts/n-digit-fibonacci-number/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=N-digit Fibonacci Number - Jorge Duque&url=https://jiduque.github.io/posts/n-digit-fibonacci-number/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://jiduque.github.io/posts/n-digit-fibonacci-number/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/wordzee/">The Stupid Games I Play: Wordzee</a><li><a href="/posts/walmart-hours-and-crime/">Walmart Hours and Crime</a><li><a href="/posts/sum-swamp/">Sum Swamp</a><li><a href="/posts/cute-counter/">Cute Counter</a><li><a href="/posts/wealth-distribution/">Wealth Distribution</a></ul></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/sum-of-even-fibonacci-numbers/"><div class="card-body"> <span class="timeago small" > Jun 12, 2021 <i class="unloaded">2021-06-12T00:00:00-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Sum of Even Fibonacci Numbers</h3><div class="text-muted small"><p> Note: This is problem 2 on Project Euler Problem Statement Each new term in the Fibonacci sequence is generated by adding the previous two terms. By starting with 1 and 2, the first 10 terms will...</p></div></div></a></div><div class="card"> <a href="/posts/wordzee/"><div class="card-body"> <span class="timeago small" > Nov 11, 2022 <i class="unloaded">2022-11-11T00:00:00-06:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>The Stupid Games I Play: Wordzee</h3><div class="text-muted small"><p> Lately I’ve been playing this game called Wordzee a lot and have been wanting to do a mathematical analysis on it. I’m mainly interested in two things about this game: strategies &amp; the most poi...</p></div></div></a></div><div class="card"> <a href="/posts/number-match/"><div class="card-body"> <span class="timeago small" > Apr 17 <i class="unloaded">2023-04-17T00:00:00-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Number Match: No-Match Game(s)</h3><div class="text-muted small"><p> Introduction to Number Match Easy Brain does it again! I’ve been playing their game Number Match and it’s pretty fun. The game is relatively straight forward: match pairs of numbers and clear the b...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/walmart-hours-and-crime/" class="btn btn-outline-primary" prompt="Older"><p>Walmart Hours and Crime</p></a> <a href="/posts/sum-of-even-fibonacci-numbers/" class="btn btn-outline-primary" prompt="Newer"><p>Sum of Even Fibonacci Numbers</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="">Jorge Duque</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://jiduque.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
