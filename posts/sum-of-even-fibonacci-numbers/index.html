<!DOCTYPE html><html lang="en-US" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Sum of Even Fibonacci Numbers" /><meta name="author" content="Jorge Duque" /><meta property="og:locale" content="en_US" /><meta name="description" content="Note: This is problem 2 on Project Euler" /><meta property="og:description" content="Note: This is problem 2 on Project Euler" /><link rel="canonical" href="https://jiduque.github.io/posts/sum-of-even-fibonacci-numbers/" /><meta property="og:url" content="https://jiduque.github.io/posts/sum-of-even-fibonacci-numbers/" /><meta property="og:site_name" content="Jorge Duque" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-06-12T00:00:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Sum of Even Fibonacci Numbers" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Jorge Duque"},"description":"Note: This is problem 2 on Project Euler","url":"https://jiduque.github.io/posts/sum-of-even-fibonacci-numbers/","@type":"BlogPosting","headline":"Sum of Even Fibonacci Numbers","dateModified":"2022-02-07T01:21:01-06:00","datePublished":"2021-06-12T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://jiduque.github.io/posts/sum-of-even-fibonacci-numbers/"},"@context":"https://schema.org"}</script><title>Sum of Even Fibonacci Numbers | Jorge Duque</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Jorge Duque"><meta name="application-name" content="Jorge Duque"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/34616214?v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Jorge Duque</a></div><div class="site-subtitle font-italic">Problems & Ramblings</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT ME</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/jiduque" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://www.linkedin.com/in/jiduque" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['jor.duqu','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Sum of Even Fibonacci Numbers</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Sum of Even Fibonacci Numbers</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Jorge Duque </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, Jun 12, 2021, 12:00 AM -0500" prep="on" > Jun 12, 2021 <i class="unloaded">2021-06-12T00:00:00-05:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Feb 7, 2022, 1:21 AM -0600" prefix="Updated " > Feb 7, 2022 <i class="unloaded">2022-02-07T01:21:01-06:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="740 words">4 min</span></div></div><div class="post-content"><p><strong>Note: This is problem 2 on Project Euler</strong></p><h1 id="problem-statement">Problem Statement</h1><p>Each new term in the Fibonacci sequence is generated by adding the previous two terms. By starting with 1 and 2, the first 10 terms will be:</p>\[1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ...\]<p>By considering the terms in the Fibonacci sequence whose values do not exceed four million, find the sum of the even-valued terms.</p><h1 id="solutions">Solution(s)</h1><p>I will explain how you can do this in two ways. One is obvious and the other is a little more involved, but it allows you to get constant time complexity. The operations done in the constant time solution are a bit expensive so in practice, they run in about the same time. My Python implementation of both solutions can be found <a href="https://github.com/jiduque/project-euler/blob/main/Problem2.py" target="_blank">here </a>.</p><h2 id="simple-solution">Simple Solution</h2><p>The simple solution to this problem is to just generate the Fibonacci numbers less than four million, and add the even ones to a running sum. Because the Fibonacci sequence grows exponentially, this solution is actually efficient (logarithmic time). But we can actually solve this problem in constant time using <a href="https://en.wikipedia.org/wiki/Generating_function" target="_blank">generating functions</a>, the <a href="https://en.wikipedia.org/wiki/Geometric_series" target="_blank">geometric series</a>, and a pattern about the parity of the Fibonacci numbers.</p><h2 id="generating-functions">Generating Functions</h2><p>Using generating functions, we can find a formula to get the $n^{th}$ Fibonacci number that is only dependent on $n$ and isn’t recursive. I won’t show how to use them to get the formula for the Fibonacci numbers, but if you’re interested, you can see how in <a href="https://www.austinrochford.com/posts/2013-11-01-generating-functions-and-fibonacci-numbers.html" target="_blank"> this post </a> by Austin Rochford. The generating function for the Fibonacci sequence is shown below:</p>\[F_n = \frac{1}{\sqrt{5}} \left( \phi^n - \psi^n \right)\]<p>where $\phi$ is the golden ratio and $\psi$ is the silver ratio. This can be somewhat surprising because all of the terms in it are irrational and it gives an integer, but it works.</p><h2 id="even-fibonacci-numbers">Even Fibonacci Numbers</h2><p>We now have an efficient way to generate Fibonacci numbers at will, but how do we know which ones are even? Better yet, how do we generate only the even Fibonacci numbers. Let’s take a look at the sequence one more time.</p>\[1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ...\]<p>Let’s change the sequence to a sequence of their parity.</p>\[o, o, e, o, o, e, o, o, e, o, o, ...\]<p>It is now clear that every third number is even. Which means we can generate the $k^{th}$ even Fibonacci number with the following formula:</p>\[E_k = \frac{1}{\sqrt{5}} \left( \phi^{3k} - \psi^{3k} \right)\]<h2 id="adding-it-up">Adding it Up</h2><p>The value we are actually looking for is the sum of these numbers until the final term is the last Fibonacci number below some given number, $N$. Let’s call the solution $S$ and for now we assume we know what the index of that Fibonacci number is and will call it $B$ (for bound). Now let’s add all the even Fibonacci numbers up to $B$.</p>\[S = \sum_{i=0}^{B}E_{i} = \sum_{i=0}^{B}\frac{1}{\sqrt{5}} \left( \phi^{3i} - \psi^{3i} \right) = \frac{1}{\sqrt{5}} \left[ \sum_{i=0}^{B} (\phi^{3})^i - \sum_{i=0}^{B} (\psi^{3})^i \right]\]<p>Now we can use the closed form version of the geometric series and get the following formula below.</p>\[S = \frac{1}{\sqrt{5}} \left[ \frac{1 - \phi^{3(B+1)}}{1 - \phi^{3}} - \frac{1 - \psi^{3(B+1)}}{1 - \psi^{3}}\right]\]<h2 id="upper-bound">Upper Bound</h2><p>We are almost done! All we are missing is what the value of $B$ actually is. Fortunately, that part is pretty straight forward. All we do is solve the following inequality:</p>\[E_k \leq N &lt; E_{k+1}\] \[\frac{1}{\sqrt{5}} \left( \phi^{3k} - \psi^{3k} \right) \leq N &lt; \frac{1}{\sqrt{5}} \left( \phi^{3(k+1)} - \psi^{3(k+1)} \right)\]<p>This thing is trancendental, which means we won’t we able to solve for $k$ exactly. But one thing to notice is that, because the magnitude of $\psi$ is less than one, as $k$ gets large, $\psi^k \to 0$. Better for us is that we are raising $\psi^3$ to the $k$ so it goes to 0 even faster. This means that for large $k$ we can simplify the inequality to the one below.</p>\[\frac{1}{\sqrt{5}} \phi^{3k} \leq N &lt; \frac{1}{\sqrt{5}} \phi^{3(k+1)}\]<p>which gives the following result:</p>\[k \leq \frac{\log \sqrt{5}N}{ \log \phi^3} &lt; k+1\]<p>For our code, this means we use the expression in the inequality to estimate our bound. We can check if the next even Fibonacci number is less than $N$ and then update the bound. For small $N$ our initial estimate will be off, but as $N$ increases, our estimate will be good and pretty much exact.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/math/'>Math</a>, <a href='/categories/project-euler/'>Project Euler</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Sum of Even Fibonacci Numbers - Jorge Duque&url=https://jiduque.github.io/posts/sum-of-even-fibonacci-numbers/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Sum of Even Fibonacci Numbers - Jorge Duque&u=https://jiduque.github.io/posts/sum-of-even-fibonacci-numbers/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Sum of Even Fibonacci Numbers - Jorge Duque&url=https://jiduque.github.io/posts/sum-of-even-fibonacci-numbers/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://jiduque.github.io/posts/sum-of-even-fibonacci-numbers/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/wordzee/">The Stupid Games I Play: Wordzee</a><li><a href="/posts/walmart-hours-and-crime/">Walmart Hours and Crime</a><li><a href="/posts/sum-swamp/">Sum Swamp</a><li><a href="/posts/cute-counter/">Cute Counter</a><li><a href="/posts/wealth-distribution/">Wealth Distribution</a></ul></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/n-digit-fibonacci-number/"><div class="card-body"> <span class="timeago small" > Jun 12, 2021 <i class="unloaded">2021-06-12T00:00:00-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>N-digit Fibonacci Number</h3><div class="text-muted small"><p> Note: This is problem 25 on Project Euler Problem Statement The Fibonacci sequence is defined by the recurrence relation: [F_n = F_{n−1} + F_{n−2}] where $F_1 = 1$ and $F_2 = 1$. If you continu...</p></div></div></a></div><div class="card"> <a href="/posts/wordzee/"><div class="card-body"> <span class="timeago small" > Nov 11, 2022 <i class="unloaded">2022-11-11T00:00:00-06:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>The Stupid Games I Play: Wordzee</h3><div class="text-muted small"><p> Lately I’ve been playing this game called Wordzee a lot and have been wanting to do a mathematical analysis on it. I’m mainly interested in two things about this game: strategies &amp; the most poi...</p></div></div></a></div><div class="card"> <a href="/posts/number-match/"><div class="card-body"> <span class="timeago small" > Apr 17 <i class="unloaded">2023-04-17T00:00:00-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Number Match: No-Match Game(s)</h3><div class="text-muted small"><p> Introduction to Number Match Easy Brain does it again! I’ve been playing their game Number Match and it’s pretty fun. The game is relatively straight forward: match pairs of numbers and clear the b...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/n-digit-fibonacci-number/" class="btn btn-outline-primary" prompt="Older"><p>N-digit Fibonacci Number</p></a> <a href="/posts/sum-swamp/" class="btn btn-outline-primary" prompt="Newer"><p>Sum Swamp</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="">Jorge Duque</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://jiduque.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
