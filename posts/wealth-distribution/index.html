<!DOCTYPE html><html lang="en-US" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Wealth Distribution" /><meta name="author" content="Jorge Duque" /><meta property="og:locale" content="en_US" /><meta name="description" content="Agent Based Models While in graduate school I took one of the most fascinating courses I’ve taken: agent-based models. In short, it’s a model where there are $N$ “agents” with some value(s) of interest that changes based on some “simple” rules (typically based on its neighbors). The whole point of this is to study emergent behaviours from simple rules in a (large) population. One example is a model of birds where the values of interest are position and velocity. The rule could be something like the birds changing their velocity based on the average velocity of other birds within some distance from itself. This model, under certain circumstances, actually leads to the birds flocking. Being in the math department, it wasn’t focused too much on the simulation aspects of it, but on the mathematical techniques to analyze these types of systems. We looked at classes of systems based on types of rules, but there was one system in particular had really caught me off guard." /><meta property="og:description" content="Agent Based Models While in graduate school I took one of the most fascinating courses I’ve taken: agent-based models. In short, it’s a model where there are $N$ “agents” with some value(s) of interest that changes based on some “simple” rules (typically based on its neighbors). The whole point of this is to study emergent behaviours from simple rules in a (large) population. One example is a model of birds where the values of interest are position and velocity. The rule could be something like the birds changing their velocity based on the average velocity of other birds within some distance from itself. This model, under certain circumstances, actually leads to the birds flocking. Being in the math department, it wasn’t focused too much on the simulation aspects of it, but on the mathematical techniques to analyze these types of systems. We looked at classes of systems based on types of rules, but there was one system in particular had really caught me off guard." /><link rel="canonical" href="https://jiduque.github.io/posts/wealth-distribution/" /><meta property="og:url" content="https://jiduque.github.io/posts/wealth-distribution/" /><meta property="og:site_name" content="Jorge Duque" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-06-08T00:00:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Wealth Distribution" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Jorge Duque"},"description":"Agent Based Models While in graduate school I took one of the most fascinating courses I’ve taken: agent-based models. In short, it’s a model where there are $N$ “agents” with some value(s) of interest that changes based on some “simple” rules (typically based on its neighbors). The whole point of this is to study emergent behaviours from simple rules in a (large) population. One example is a model of birds where the values of interest are position and velocity. The rule could be something like the birds changing their velocity based on the average velocity of other birds within some distance from itself. This model, under certain circumstances, actually leads to the birds flocking. Being in the math department, it wasn’t focused too much on the simulation aspects of it, but on the mathematical techniques to analyze these types of systems. We looked at classes of systems based on types of rules, but there was one system in particular had really caught me off guard.","url":"https://jiduque.github.io/posts/wealth-distribution/","@type":"BlogPosting","headline":"Wealth Distribution","dateModified":"2022-08-27T16:35:23-05:00","datePublished":"2022-06-08T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://jiduque.github.io/posts/wealth-distribution/"},"@context":"https://schema.org"}</script><title>Wealth Distribution | Jorge Duque</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Jorge Duque"><meta name="application-name" content="Jorge Duque"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/34616214?v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Jorge Duque</a></div><div class="site-subtitle font-italic">Problems & Ramblings</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT ME</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/jiduque" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://www.linkedin.com/in/jiduque" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['jor.duqu','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Wealth Distribution</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Wealth Distribution</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Jorge Duque </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Jun 8, 2022, 12:00 AM -0500" prep="on" > Jun 8, 2022 <i class="unloaded">2022-06-08T00:00:00-05:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sat, Aug 27, 2022, 4:35 PM -0500" prefix="Updated " > Aug 27, 2022 <i class="unloaded">2022-08-27T16:35:23-05:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1741 words">9 min</span></div></div><div class="post-content"><h2 id="agent-based-models">Agent Based Models</h2><p>While in graduate school I took one of the most fascinating courses I’ve taken: agent-based models. In short, it’s a model where there are $N$ “agents” with some value(s) of interest that changes based on some “simple” rules (typically based on its neighbors). The whole point of this is to study emergent behaviours from simple rules in a (large) population. One example is a model of birds where the values of interest are position and velocity. The rule could be something like the birds changing their velocity based on the average velocity of other birds within some distance from itself. This model, under certain circumstances, actually leads to the birds flocking. Being in the math department, it wasn’t focused too much on the simulation aspects of it, but on the mathematical techniques to analyze these types of systems. We looked at classes of systems based on types of rules, but there was one system in particular had really caught me off guard.</p><h2 id="binary-interaction">Binary Interaction</h2><p>The binary interaction model is a system where there are $N$ agents and at each time step, we choose two agents randomly and have them interact. The code below can run any of these such simulations. Although it is very simple, it can represent many systems and lead to some interesting results.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Union</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">sample</span>


<span class="n">Individual</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
<span class="n">Population</span> <span class="o">=</span> <span class="n">List</span><span class="p">[</span><span class="n">Individual</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">simulate</span><span class="p">(</span><span class="n">initial</span><span class="p">:</span> <span class="n">Population</span><span class="p">,</span> <span class="n">time</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">interaction</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Population</span><span class="p">:</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">initial</span><span class="p">)</span>
    <span class="n">interactions</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="mi">2</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="n">time</span><span class="p">))</span>

    <span class="n">output</span> <span class="o">=</span> <span class="n">initial</span><span class="p">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">interactions</span><span class="p">:</span>
        <span class="n">output</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">output</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">interaction</span><span class="p">(</span><span class="n">output</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">output</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">output</span>
</pre></table></code></div></div><p>The systems we looked at were all economic models of sorts, essentially two agents interact by one giving the other some amount of money. We are interested in the long-term behavior of such systems. To make the system fair, all of our systems start the agents with the same amount of money.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">x0</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">t</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1_000</span><span class="p">,</span> <span class="mi">10_000_000</span>
<span class="n">initial_population</span> <span class="o">=</span> <span class="p">[</span><span class="n">x0</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>
</pre></table></code></div></div><p>Simulations are fun and interesting, but formalizing a system, so we can use math to compute things gives much more confidence than a statistical analysis. I show the main ideas used to derive the formulas for the distributions below. After that, we explore three different interaction rules by showing the formulas, running a simulation, and plotting the distribution of the simulation. I won’t derive the formula for each one, as it’s very involved, but I can share the details, if interested.</p><h2 id="mathematical-techniques-for-analysis">Mathematical Techniques For Analysis</h2><p>Let $N$ be the number of agents, $X_t \in \bf{R}^N$, and $X^i_t$ represents the value of agent $i$ at time $t$. Suppose agent $i$ and $j$ have been selected to interact at time $t+h$ their values will interact in the following way.</p>\[X^i_{t + h} = F_1(X^i_t, X^j_t, h)\] \[X^j_{t + h} = F_2(X^i_t, X^j_t, h)\]<p>Our goal is to find the distribution, and that is done by getting a differential equation that this process satisfies. Then to find the distribution, we take a general expectation of a generic function, $\phi(x)$, with our distribution $W(x, t + h)$ for all agents at time $t + h$ and use properties of our system and probability theory.</p>\[E[ \phi(x^{t+h}) ] = \int \phi(x) W(x, t + h) dx\]<p>Partitioning by the possible combinations and using the <a href="https://en.wikipedia.org/wiki/Law_of_total_expectation">law of total expectation</a> we get that the expectation value is also equivalent to the</p>\[E[\phi(x^{t+h})] = \sum_{i \neq j} \frac{1}{N(N-1)} E[\phi(x^{t+h}) | (i, j) \text{ are selected } ]\]<p>We apply the law of total expectation again and partition over the values of $x$ to get the following result</p>\[\sum_{i \neq j} \frac{1}{N(N-1)} E[\phi(x^{t+h}) | (i, j) \text{ are selected } ] = \sum_{i \neq j} \frac{1}{N(N-1)} \int W(x, t) E[\phi(x^{t+h}) | (i, j) \text{ are selected and } x^t = x ]dx\]<p>Putting these together, we have</p>\[\int \phi(x) W(x, t + h) dx = \sum_{i \neq j} \frac{1}{N(N-1)} \int W(x, t) E[\phi(x^{t+h}) | (i, j) \text{ are selected and } x^t = x ]dx\]<p>This setup works for all binary interaction setups, but after that, we usually start to use properties of our rules to further expand the right-hand side. The typical techniques at this point would be to use <a href="https://en.wikipedia.org/wiki/Indicator_function">indicator functions</a> for the conditionals of possible events. Then try to shift the right-hand side, using taylor expansions, so that you can get matching inputs for test functions and distribution functions. The goal is to get things that look like $\phi(x + \delta) - \phi(x)$ and $W(x, t + h) - W(x, t)$ so that we can take limits and get derivatives. We also try to remove all derivatives of $\phi$ by doing integration by part. The overall goal is to massage the equation, so we get something that looks like this:</p>\[\int \left[ \text{ some partial differential equation } \right] \phi(x) dx = 0\]<p>And because $\phi(x)$ is any differentiable function, the PDE must be equal to zero. This then gives us a differential equation that this distribution satisfies. Usually we can’t get a closed form solution for the equation, but it still allows us to look at long-term behavior and occasionally lets us compute the average and variance as a function of time. One thing to note here is that the $\delta$ used in our simulations is held as a constant, but is going towards zero in our mathematical analysis, so these techniques aren’t necessarily an exact match to the simulations. Our simulations are more of an approximation to our mathematical model.</p><p>This may not be the most useful thing right now, so I will provide the full derivation of one these systems in another post.</p><h2 id="fixed-transaction">Fixed Transaction</h2><p>I will start with the simplest model, the one we focused on in class, because I believe it has the most surprising results. The mathematical rules this system follow are the following:</p>\[X^i_{t + h} = X^i_t + \delta\] \[X^j_{t + h} = X^j_t - \delta\]<p>if $X^j_{t} \geq \delta$, otherwise, no exchange is made and choose another pair of agents. $\delta$ is a fixed number that is held constant for the whole simulation. The same logic is coded up below.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">fixed_transaction</span><span class="p">(</span><span class="n">x1</span><span class="p">:</span> <span class="n">Individual</span><span class="p">,</span> <span class="n">x2</span><span class="p">:</span> <span class="n">Individual</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Individual</span><span class="p">,</span> <span class="n">Individual</span><span class="p">]:</span>
    <span class="n">delta</span> <span class="o">=</span> <span class="mf">0.1</span>
    <span class="k">if</span> <span class="n">x2</span> <span class="o">&gt;=</span> <span class="n">delta</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">x1</span> <span class="o">+</span> <span class="n">delta</span><span class="p">,</span> <span class="n">x2</span> <span class="o">-</span> <span class="n">delta</span>
    <span class="k">return</span> <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span>
</pre></table></code></div></div><p>After a really long derivation, like two and a half lectures, we end up with the following non-linear partial differential equation.</p>\[\partial_t f - \frac{d}{N} f(0, t) \partial_x f + \frac{d}{N} \partial_{xx} f = 0\]<p>Here,the distribution, $f$, is no longer the distribution of the populations, but the distribution for one of the agents which is randomly selected. $d$ is the limit of $\delta^2/h$ as both $\delta$ and $h$ approach zero. From this, we can compute the mean and the asymptotic distribution (limit of distribution as $t \to \infty$). Using this formula we find out that the mean is unsurprisingly constant and the asymptotic distribution is a bit surprising. The results are summarized below. Please stop and remember that this game is random as hell and everyone has the same chance of being selected, and they all have the same probability of losing $\delta$ or gaining $\delta$ dollars.</p>\[f(x) = x_0 e^{-\frac{x}{x_0}}\]<p>This system approaches an exponential distribution! This was quite an interesting result to me because the game is so random and “fair” that I thought it would lead to a normal distribution, but unfortunately that is not case. Below we run a simulation for a while and plot the distribution to confirm.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">fixed_result</span> <span class="o">=</span> <span class="n">simulate</span><span class="p">(</span><span class="n">initial_population</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">fixed_transaction</span><span class="p">)</span>
</pre></table></code></div></div><p>Now that we ran a simulation, we need to plot it. The function below will be used to plot our distribution.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="k">def</span> <span class="nf">plot_distribution</span><span class="p">(</span><span class="n">values</span><span class="p">:</span> <span class="n">Population</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">hist</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>

    <span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">"x"</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">xticks</span><span class="p">()</span>

    <span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">"Number of Agents"</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">plot_distribution</span><span class="p">(</span><span class="n">fixed_result</span><span class="p">)</span>
</pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/images/2022-06-08-wealth-distribution/output_11_0.png" alt="png" /></p><p>Not quite exponential, but it’s getting there!</p><h2 id="percentage-based">Percentage Based</h2><p>The percentage model is similar to the fixed transaction model except now people give up a fixed percentage of their money. The rules are as follows:</p>\[X^i_{t + h} = X^i_t + \delta X^j_t\] \[X^j_{t + h} = X^j_t - \delta X^j_t\]<p>where $\delta \in (0, 1)$ is a fixed number that is held constant for the whole simulation. The same logic is coded up below.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">fractional_interaction</span><span class="p">(</span><span class="n">x1</span><span class="p">:</span> <span class="n">Individual</span><span class="p">,</span> <span class="n">x2</span><span class="p">:</span> <span class="n">Individual</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Individual</span><span class="p">,</span> <span class="n">Individual</span><span class="p">]:</span>
    <span class="n">frac</span> <span class="o">=</span> <span class="mf">0.1</span>
    <span class="n">delta</span> <span class="o">=</span> <span class="n">frac</span> <span class="o">*</span> <span class="n">x2</span>
    <span class="k">return</span> <span class="n">x1</span> <span class="o">+</span> <span class="n">delta</span><span class="p">,</span> <span class="n">x2</span> <span class="o">-</span> <span class="n">delta</span>
</pre></table></code></div></div><p>This particular system leads to the following PDE.</p>\[\partial_t f + \partial_x \left[ \frac{x_0 - x}{N} f \right] = 0\]<p>Being that this one is linear and a bit simpler, this one can be solved in general, but paired with our constraints for it being a probability distribution causes it not to be solvable analytically. The variance of this function approaches zero, so this distribution will approach a constant.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">fractional_results</span> <span class="o">=</span> <span class="n">simulate</span><span class="p">(</span><span class="n">initial_population</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">fractional_interaction</span><span class="p">)</span>
</pre></table></code></div></div><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">plot_distribution</span><span class="p">(</span><span class="n">fractional_results</span><span class="p">)</span>
</pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/images/2022-06-08-wealth-distribution/output_17_0.png" alt="png" /></p><h2 id="towards-an-average">Towards An Average</h2><p>The percentage model is similar to the fixed transaction model except now people give up a fixed percentage of their money. The rules are as follows:</p>\[X^i_{t + h} = (1 - h) X^i_t + \frac{h}{2} (X^i_t + X^j_t)\] \[X^j_{t + h} = (1 - h) X^j_t + \frac{h}{2} (X^i_t + X^j_t)\]<p>where $\delta \in (0, 1)$ is a fixed number that is held constant for the whole simulation. The same logic is coded up below with fixed time-step, $h$.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">average_interaction</span><span class="p">(</span><span class="n">x1</span><span class="p">:</span> <span class="n">Individual</span><span class="p">,</span> <span class="n">x2</span><span class="p">:</span> <span class="n">Individual</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Individual</span><span class="p">,</span> <span class="n">Individual</span><span class="p">]:</span>
    <span class="n">h</span> <span class="o">=</span> <span class="mf">0.1</span>
    <span class="n">avg</span> <span class="o">=</span> <span class="p">(</span><span class="n">x1</span> <span class="o">+</span> <span class="n">x2</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="k">return</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">h</span><span class="p">)</span> <span class="o">*</span> <span class="n">x1</span> <span class="o">+</span> <span class="n">h</span> <span class="o">*</span> <span class="n">avg</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">h</span><span class="p">)</span> <span class="o">*</span> <span class="n">x2</span> <span class="o">+</span> <span class="n">h</span> <span class="o">*</span> <span class="n">avg</span>
</pre></table></code></div></div><p>This particular system leads to the following PDE.</p>\[\partial_t f + \partial_x \left[ \frac{x - x_0}{N} f \right] = 0\]<p>Like the equation above, this can be solved in general but paired with our constraints for it being a probability distribution causes it not to be solvable. But we can compute the variance, and it approaches zero, which means all agents will approach the same value, $x_0$.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">gauss</span>
<span class="n">mixed_pop</span> <span class="o">=</span> <span class="p">[</span><span class="n">x0</span> <span class="o">+</span> <span class="n">gauss</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>
<span class="n">average_result</span> <span class="o">=</span> <span class="n">simulate</span><span class="p">(</span><span class="n">initial_population</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">average_interaction</span><span class="p">)</span>
</pre></table></code></div></div><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">plot_distribution</span><span class="p">(</span><span class="n">average_result</span><span class="p">)</span>
</pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/images/2022-06-08-wealth-distribution/output_22_0.png" alt="png" /></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/simulations/'>Simulations</a>, <a href='/categories/agent-based-models/'>Agent-Based Models</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Wealth Distribution - Jorge Duque&url=https://jiduque.github.io/posts/wealth-distribution/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Wealth Distribution - Jorge Duque&u=https://jiduque.github.io/posts/wealth-distribution/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Wealth Distribution - Jorge Duque&url=https://jiduque.github.io/posts/wealth-distribution/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://jiduque.github.io/posts/wealth-distribution/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/wordzee/">The Stupid Games I Play: Wordzee</a><li><a href="/posts/walmart-hours-and-crime/">Walmart Hours and Crime</a><li><a href="/posts/sum-swamp/">Sum Swamp</a><li><a href="/posts/cute-counter/">Cute Counter</a><li><a href="/posts/wealth-distribution/">Wealth Distribution</a></ul></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/number-match/"><div class="card-body"> <span class="timeago small" > Apr 17 <i class="unloaded">2023-04-17T00:00:00-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Number Match: No-Match Game(s)</h3><div class="text-muted small"><p> Introduction to Number Match Easy Brain does it again! I’ve been playing their game Number Match and it’s pretty fun. The game is relatively straight forward: match pairs of numbers and clear the b...</p></div></div></a></div><div class="card"> <a href="/posts/wordzee/"><div class="card-body"> <span class="timeago small" > Nov 11, 2022 <i class="unloaded">2022-11-11T00:00:00-06:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>The Stupid Games I Play: Wordzee</h3><div class="text-muted small"><p> Lately I’ve been playing this game called Wordzee a lot and have been wanting to do a mathematical analysis on it. I’m mainly interested in two things about this game: strategies &amp; the most poi...</p></div></div></a></div><div class="card"> <a href="/posts/cute-counter/"><div class="card-body"> <span class="timeago small" > Aug 27, 2022 <i class="unloaded">2022-08-27T00:00:00-05:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Cute Counter</h3><div class="text-muted small"><p> The Problem Even though counting seems like an easy problem, it can have its difficulties. When data is streaming, we assume a nearly endless influx of data. This means that when we are counting so...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/child-simulation/" class="btn btn-outline-primary" prompt="Older"><p>Child Hoarding</p></a> <a href="/posts/cute-counter/" class="btn btn-outline-primary" prompt="Newer"><p>Cute Counter</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="">Jorge Duque</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://jiduque.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
